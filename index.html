<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Punya Celine.</title>
<style>
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    background: #0f0f14;
    font-family: "Times New Roman", serif;
    color: #ffc8dc;
    overflow: hidden;
}

.container {
    width: 100%;
    height: 100%;
    position: relative;
}

.center-area {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.title {
    font-size: clamp(22px, 3vw, 36px);
    margin-bottom: 8px;
    letter-spacing: 1px;
    opacity: 0.95;
}

.subtitle {
    font-size: clamp(14px, 1.5vw, 18px);
    margin-bottom: 24px;
    opacity: 0.85;
    font-style: italic;
}

button {
    background: #b45078;
    color: white;
    border: none;
    padding: 18px 36px;
    font-size: 1.2rem;
    border-radius: 16px;
    cursor: pointer;
    transition: background 0.3s ease, transform 0.2s ease;
}

button:hover {
    background: #dc78a0;
    transform: scale(1.05);
}

/* LETTER WRAPPER SCROLLABLE */
.letter-wrapper {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 70%;
    max-width: 900px;
    max-height: 80%;
    padding: 20px;
    background: rgba(15,15,20,0.95);
    border-radius: 16px;
    overflow-y: auto; /* scroll vertikal */
    opacity: 0;
    visibility: hidden;
    transition: opacity 1s ease;
}

.letter-wrapper.show {
    opacity: 1;
    visibility: visible;
}

.letter-title {
    font-size: clamp(28px, 4vw, 42px);
    font-weight: bold;
    text-align: center;
    margin-bottom: 10px;
    opacity: 0.95;
}

.letter-title .author {
    display: block;
    font-size: clamp(16px, 2vw, 22px);
    font-style: italic;
    margin-top: 6px;
    opacity: 0.85;
}

.letter {
    font-size: clamp(18px, 2vw, 26px);
    line-height: 1.7;
    white-space: pre-wrap;
    text-align: justify;
    text-justify: inter-word;
}

/* Scrollbar stylish (opsional) */
.letter-wrapper::-webkit-scrollbar {
    width: 8px;
}

.letter-wrapper::-webkit-scrollbar-thumb {
    background-color: #dc78a0;
    border-radius: 4px;
}

@media (max-width: 768px) {
    .letter-wrapper {
        width: 85%;
        max-height: 75%;
    }
}
</style>
</head>
<body>

<div class="container">
    <div class="center-area" id="buttonContainer">
        <div class="title">Last Mission with Bound To Past</div>
        <div class="subtitle">Celine Renjana Arunika</div>
        <button id="openBtn">Open ü§ç</button>
    </div>

    <div class="letter-wrapper" id="letterWrapper">
        <div class="letter-title" id="letterTitle"></div>
        <div class="letter" id="letter"></div>
    </div>
</div>

<audio id="bgm" loop>
    <source src="diakhirperang.mp3" type="audio/mpeg">
    <source src="diakhirperang.ogg" type="audio/ogg">
</audio>

<script>
const letterTitleText = "Diakhir Perang";
const letterAuthorText = "Nadin Amizah";
const letterText = [
`Perang telah usai. Aku mendengarnya dari dalam nadanya, dari cara melodi itu tidak lagi berkelok seperti pelarian, tetapi mengalir lurus dan tenang, seperti sungai yang akhirnya menemukan laut. Itu seperti pagi setelah pertempuran berakhir. Kabut masih menyelimuti tanah bekas medan luka, tetapi burung-burung sudah mulai berkicau lagi. Di sana, di antara denting piano yang jernih, tersimpan sebuah pengakuan bahwa perjuangan paling dahsyat bukanlah melawan dunia, melainkan melawan gema-gema dari masa lalu yang bergema dengan sangat keras di dalam tengkorak sendiri.\n\n`,
`Kini, sembuh itu terasa seperti sebuah ruang yang lapang. Tempat di mana semua senjataku yang berkarat, panah-panah dari niat yang salah dan perisai dari ketakutan, akhirnya dibaringkan. Aku tidak lagi membawanya di punggung. Aku tidak lagi terbangun dengan kewaspadaan yang menggigil. Aku akhirnya sampai di sana, di sebuah tempat penuh kemenangan, tempat di mana angin perlahan mengelus rerumputan di tanah yang tadinya gersang. Aku telah sepenuhnya sembuh. Perang sungguh telah usai.`
];

const openBtn = document.getElementById("openBtn");
const letterDiv = document.getElementById("letter");
const letterTitleDiv = document.getElementById("letterTitle");
const music = document.getElementById("bgm");
const buttonContainer = document.getElementById("buttonContainer");
const letterWrapper = document.getElementById("letterWrapper");

let typingSpeed = 80; 
let titleIndex = 0;
let authorIndex = 0;
let lineIndex = 0;
let charIndex = 0;

openBtn.addEventListener("click", () => {
    buttonContainer.style.display = "none";
    letterWrapper.classList.add('show');

    // mainkan musik
    music.play().catch(err => console.log("Audio gagal diputar:", err));

    // typewriter judul & author
    typeWriterTitle();

    // delay 15 detik sebelum isi letter muncul perlahan
    setTimeout(() => {
        typeWriterContent();
    }, 15000);
});

// Typewriter untuk judul
function typeWriterTitle() {
    if(titleIndex < letterTitleText.length){
        letterTitleDiv.innerHTML += letterTitleText.charAt(titleIndex);
        titleIndex++;
        setTimeout(typeWriterTitle, typingSpeed);
    } else {
        letterTitleDiv.innerHTML += "<span class='author'></span>";
        typeWriterAuthor();
    }
}

// Typewriter untuk author
function typeWriterAuthor(){
    let authorSpan = letterTitleDiv.querySelector('.author');
    if(authorIndex < letterAuthorText.length){
        authorSpan.innerHTML += letterAuthorText.charAt(authorIndex);
        authorIndex++;
        setTimeout(typeWriterAuthor, typingSpeed);
    }
}

// Typewriter untuk isi letter
function typeWriterContent() {
    if (lineIndex < letterText.length) {
        if (charIndex < letterText[lineIndex].length) {
            letterDiv.innerHTML += letterText[lineIndex].charAt(charIndex);

            let lastChar = letterText[lineIndex].charAt(charIndex);
            let delay = typingSpeed;

            if (lastChar === "," || lastChar === ";") delay = typingSpeed * 12;
            else if (lastChar === "." || lastChar === "!" || lastChar === "?") delay = typingSpeed * 18;

            charIndex++;
            setTimeout(typeWriterContent, delay);
        } else {
            lineIndex++;
            charIndex = 0;
            setTimeout(typeWriterContent, 800);
        }
    }
}
</script>

</body>
</html>
